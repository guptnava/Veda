-- === DROP TABLES (if they exist) ===
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE sales CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE products CASCADE CONSTRAINTS';
    EXECUTE IMMEDIATE 'DROP TABLE customers CASCADE CONSTRAINTS';
EXCEPTION
    WHEN OTHERS THEN
        NULL; -- Ignore errors if tables do not exist
END;
/

-- === CREATE TABLE: customers ===
CREATE TABLE customers (
    id       NUMBER PRIMARY KEY,
    name     VARCHAR2(100) NOT NULL,
    country  VARCHAR2(50) NOT NULL
);

-- === CREATE TABLE: products ===å
CREATE TABLE products (
    id        NUMBER PRIMARY KEY,
    name      VARCHAR2(100) NOT NULL,
    category  VARCHAR2(50) NOT NULL
);

-- === CREATE TABLE: sales ===
CREATE TABLE sales (
    sale_id      NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    customer_id  NUMBER NOT NULL,
    product_id   NUMBER NOT NULL,
    sale_date    DATE NOT NULL,
    quantity     NUMBER(10, 2) DEFAULT 1 NOT NULL,
    unit_price   NUMBER(10, 2) NOT NULL,
    total_amount NUMBER(12, 2) GENERATED ALWAYS AS (quantity * unit_price) VIRTUAL,
    region       VARCHAR2(50),

    CONSTRAINT fk_sales_customer FOREIGN KEY (customer_id) REFERENCES customers(id),
    CONSTRAINT fk_sales_product FOREIGN KEY (product_id) REFERENCES products(id)
);

-- === INSERT: customers ===
INSERT INTO customers (id, name, country) VALUES (1, 'Alice Johnson', 'USA');
INSERT INTO customers (id, name, country) VALUES (2, 'Bob Smith', 'Canada');
INSERT INTO customers (id, name, country) VALUES (3, 'Carlos Diaz', 'Mexico');
INSERT INTO customers (id, name, country) VALUES (4, 'Diana Lee', 'USA');
INSERT INTO customers (id, name, country) VALUES (5, 'Eva Müller', 'Germany');

-- === INSERT: products ===
INSERT INTO products (id, name, category) VALUES (101, 'Laptop Pro 15"', 'Electronics');
INSERT INTO products (id, name, category) VALUES (102, 'Smartphone X', 'Electronics');
INSERT INTO products (id, name, category) VALUES (103, 'Noise-Canceling Headphones', 'Audio');
INSERT INTO products (id, name, category) VALUES (104, 'Gaming Mouse', 'Accessories');
INSERT INTO products (id, name, category) VALUES (105, 'Office Chair', 'Furniture');

-- === INSERT: sales ===
INSERT INTO sales (customer_id, product_id, sale_date, quantity, unit_price, region)
VALUES (1, 101, TO_DATE('2025-07-01', 'YYYY-MM-DD'), 2, 1200.00, 'North America');

INSERT INTO sales (customer_id, product_id, sale_date, quantity, unit_price, region)
VALUES (2, 103, TO_DATE('2025-07-02', 'YYYY-MM-DD'), 1, 200.00, 'North America');

INSERT INTO sales (customer_id, product_id, sale_date, quantity, unit_price, region)
VALUES (3, 104, TO_DATE('2025-07-03', 'YYYY-MM-DD'), 3, 50.00, 'Latin America');

INSERT INTO sales (customer_id, product_id, sale_date, quantity, unit_price, region)
VALUES (4, 102, TO_DATE('2025-07-04', 'YYYY-MM-DD'), 1, 900.00, 'North America');

INSERT INTO sales (customer_id, product_id, sale_date, quantity, unit_price, region)
VALUES (5, 105, TO_DATE('2025-07-05', 'YYYY-MM-DD'), 2, 350.00, 'Europe');

COMMIT;

select * from sales;
select * from products;
select * from customers;

select * from sql_prompt_examples
